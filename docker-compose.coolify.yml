# Docker Compose para Coolify
# Usa a imagem pré-construída do GitHub Container Registry

version: '3.8'

services:
  sharepoint-whatsapp:
    image: ghcr.io/senisse19/automacao-bi-rankingmetas:main
    container_name: sharepoint-whatsapp-monitor
    restart: unless-stopped
    
    environment:
      - PYTHONUNBUFFERED=1
      # SharePoint
      - SHAREPOINT_CLIENT_ID=75342350-912b-496c-8e37-9db1881a3c7e
      - SHAREPOINT_CLIENT_SECRET=REDACTED
      - SHAREPOINT_TENANT=audittecnologia.onmicrosoft.com
      - SHAREPOINT_SITE_ID=audittecnologia.sharepoint.com,9af1fad3-9d34-4233-af6a-9b80903f5c62,a93d52bb-228d-48c8-9764-ed2ce7caa83a
      - SHAREPOINT_FOLDER_ID=01RAZX6ORC2JKRXA7ZLRDIEZPGRXKO7TAC
      # Evolution API
      - EVOLUTION_SERVER_URL=https://evolution.grupostudio.tec.br
      - EVOLUTION_API_KEY=1FE27459CF28-42B3-AEB2-57B5EE084B21
      - EVOLUTION_INSTANCE_NAME=automation indicator
      - EVOLUTION_GROUP_ID=120363407075752057@g.us
      # Config
      - MONITOR_INTERVAL_SECONDS=60
      - DATA_DIR=/app/data

    volumes:
      - sharepoint-data:/app/data

    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

volumes:
  sharepoint-data:
